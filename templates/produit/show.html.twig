{% extends 'base.html.twig' %}

{% block title %}Produit{% endblock %}

{% block body %}
    <h1>Produit</h1>

                <div class="col">
                  <div class="card shadow-sm" style= "height: 450px";>
                    <div class="card-body-img" style= "width:100%; height: 255px";>
                        {% if produit.photo is not null %}
                            <img src="{{ asset('uploads/'~ produit.photo) }}" style= "width:100%; height:100%; object-fit:cover">
                        {% endif %}
                    </div>
                    <div class="card-body" style="display:flex; flex-direction:column; justify-content: space-between;">
                    <div class="d-flex justify-content-between">
                      <p class="card-text">{{ produit.nom}}</p>
                      <p class="text-body-secondary">{{ produit.stock }} en stock</p>
                    </div>
                      <p class="card-text">{{ produit.description }}</p>
                      <div class="d-flex justify-content-between align-items-center">
                          <a href="{{ path('app_produit_show', {'id': produit.id}) }}" class="btn btn-secondary">Plus d'info</a>
                          <form action="{{ path('app_contenu_panier_new', {'id': produit.id}) }}" method="POST">
                            <button type="submit" class="btn btn-success">Ajouter au Panier</button>
                          </form>
                      </div>
                    </div>
                  </div>
                </div>
    <table class="table">
        <tbody>
            <tr>
                <th>Id</th>
                <td>{{ produit.id }}</td>
            </tr>
            <tr>
                <th>Nom</th>
                <td>{{ produit.nom }}</td>
            </tr>
            <tr>
                <th>Description</th>
                <td>{{ produit.description }}</td>
            </tr>
            <tr>
                <th>Prix</th>
                <td>{{ produit.prix }}</td>
            </tr>
            <tr>
                <th>Stock</th>
                <td>{{ produit.stock }}</td>
            </tr>
            <tr>
                <th>Photo</th>
                <td>{{ produit.photo }}</td>
            </tr>
        </tbody>
    </table>
    <a href="{{ path('app_produit_index') }}">Retour</a>

    {% if is_granted('ROLE_ADMIN' OR 'ROLE_SUPER_ADMIN') %}
        <a href="{{ path('app_produit_edit', {'id': produit.id}) }}">Editer</a>
        {{ include('produit/_delete_form.html.twig') }}
    {% endif %}
    {% if not is_granted('ROLE_ADMIN' OR 'ROLE_SUPER_ADMIN') %}
        <form action="{{ path('app_contenu_panier_new', {'id': produit.id}) }}" method="POST">
            <button type="submit" class="btn btn-success">Ajouter au Panier</button>
        </form>
    {% endif %}
{% endblock %}
